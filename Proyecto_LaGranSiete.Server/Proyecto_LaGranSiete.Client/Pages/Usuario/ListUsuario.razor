@page "/Api/Usuario"
@inject IHTTPServicio http
@inject NavigationManager navigationManager




<!DOCTYPE html>
<html>
<head>
    <title>Lista usuarios</title>
</head>
<body>

    <header>
        <h1>Lista de usuarios</h1>
        <h3>Lista de usuarios</h3>
    </header>

    <main>

        <table>

            <tr>
                <th>Nombre</th>
                <th>Apellido</th>
                <th>Fecha de nacimiento</th>
                <th>Teléfono</th>
                <th>Correo Electrónico</th>
                <th>Parentesco</th>

            </tr>

            @if (listaUsuarios == null)
            {
                <p>Buscando...</p>
            }
            else 
            {
                @foreach (var item in listaUsuarios) 
                {
                    <tr>
                        <td>@item.Nombre</td>
                        <td>@item.Apellido</td>
                        <td>@item.FechaNacimiento</td>
                        <td>@item.Telefono</td>
                        <td>@item.CorreoElectronico</td>
                        <td>@item.Parentesco</td>

                    </tr>
                }
            }

        </table>



    </main>

    <footer>

    </footer>

</body>
</html>

@code {
    List<Usuario> listaUsuarios;
    string Mensaje = "";

    //asynk / Await (Hakuna matara  - La canción )
    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        await Leer();
    }

    private async Task Leer() 
    {
        var resp = await http.Get<List<Usuario>>("Api/Usuario");

        if (!resp.Error)
        {
            listaUsuarios = resp.Respuesta;
        }
        else 
        {
            Mensaje = "Error";
        }

        
    }
}
       

